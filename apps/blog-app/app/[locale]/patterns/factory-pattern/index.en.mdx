# Factory Patterns

如果我们创建相对复杂且可配置的对象，则出厂模式可能会很有用。键和值的值取决于某个环境或配置。使用工厂模式，我们可以轻松地创建包含自定义键和值的新对象！

## 什么时候使用工厂模式？

- 性能要求较高的场景：当你需要频繁地创建大量相似的对象时，工厂模式可以减少对象的实例化和方法的重复创建。
- 对象创建简单的场景：如果对象的结构相对简单，没有复杂的继承关系或逻辑，工厂模式是一个高效且简洁的选择。

## 优点

当我们必须创建共享相同属性的多个较小对象时，工厂模式很有用。出厂功能可以根据当前环境或特定于用户的配置轻松返回自定义对象。

## 缺点

但是，在许多情况下，每次创建新实例而不是新对象可能更有效。

### 比较工厂模式与实例化：

- 性能差异：

  - 每次使用 new 关键字创建新实例时，都会生成一个新的对象和方法，并且每个实例的 __proto__ 会指向类的原型链。
  - 如果每次都使用工厂模式返回一个对象，而不是实例化一个类，可以避免一些性能开销（比如原型链的查找和方法的重复创建）。

- 内存开销：

    - 使用 new 创建类实例时，每个实例都会占用独立的内存空间，包括实例方法和属性。
    - 使用工厂模式返回对象时，可以通过对象字面量的方式简洁地返回对象，这样每次创建的对象是一个轻量级的对象，且不会重复创建相同的方法。

在JavaScript中，工厂模式不仅仅是一个不使用new关键字的函数的函数。 ES6箭头功能使我们能够创建每次隐式返回对象的小型工厂功能。

``` javascript
const createUser = ({ firstName, lastName, email }) => ({
  firstName,
  lastName,
  email,
  fullName() {
    return `${this.firstName} ${this.lastName}`;
  },
});
```